"use strict";var e=tt;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={};function r(e){var r=void 0===e?"undefined":t(e);return"object"===r?n[Object.prototype.toString.call(e)]:r}function o(e){return"number"===r(e)}function i(e){return"string"===r(e)}function a(e){return Array.isArray(e)}function u(e){return"boolean"===r(e)}function c(e){return"object"===r(e)}function s(e){return"function"===r(e)}function f(e,t){if(void 0===t&&(t=255),!i(e))return!1;var n=e.length;return n<t&&n>=1}function l(e){return!!f(e,99)&&/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e)}function p(e){return!!(i(e)||o(e)||a(e)||u(e))&&(!(i(e)&&!f(e,255))&&(!a(e)||e.some((function(e){return!f(e,255)}))))}function d(e){if(!c(e))return!1;for(var t in e){if(!l(t))return!1;if(!p(e[t]))return!1}return!0}["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"].map((function(e){n["[object "+e+"]"]=e.toLowerCase()}));var g={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\ncurrent keyType:{KEYTYPE}",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value: {VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"DebugMode only can be 0,1,2",600021:"{FN}:Property value invalid of key[{KEY}], support type: Object, Object.keys length needs to be 1-499 \ncurrent length:{VALUE}\n"},h={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys FeiShu sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed",20012:"Send Message to Server: {KEY} \ndata:{VALUE}",20013:"收到服务器的时间: {VALUE} \n本地时间: {KEY} \n时间相差:  {FN} \n数据将会进行时间校准",20014:"aliasID already bound"};function y(e){if(1===_.debugMode||2===_.debugMode){var t=(h[e.code]||h.common).replace(/{FN}/,e.fn).replace(/{KEY}/g,e.key||"").replace(/{VALUE}/g,JSON.stringify(e.value));console.log(t)}}function m(e){var t=(g[e.code]||g.common).replace(/{FN}/g,e.fn||"").replace(/{KEY}/g,JSON.stringify(e.key||"")).replace(/{VALUE}/g,JSON.stringify(e.value)).replace(/{VALUETYPE}/g,r(e.value)).replace(/{KEYTYPE}/g,r(e.key));1!==_.debugMode&&2!==_.debugMode||console.warn(t)}var v={appkey:{verify:[f]},uploadURL:{verify:[i]},debugMode:{verify:[o]},auto:{verify:[u]},autoProfile:{verify:[u]},encryptType:{verify:[o]},autoShare:{verify:[u]},allowTimeCheck:{verify:[u]},maxDiffTimeInterval:{verify:[o,function(e){return!(e<=0)}]},autoTrack:{verify:[u]},autoCompleteURL:{verify:[u]},autoPageViewDuration:{verify:[u]},$appname:{verify:[i]},$appid:{verify:[i]}},_={appkey:"",uploadURL:"",debugMode:0,auto:!0,autoProfile:!0,encryptType:0,autoShare:!1,allowTimeCheck:!1,maxDiffTimeInterval:30,autoTrack:!1,autoCompleteURL:!0,autoPageViewDuration:!1,$appid:"",$appname:""};function $(e,t){return void 0===t&&(t=!0),new Promise((function(n,r){t&&Object.keys(e).forEach((function(t){var n=v[t];if(n&&n.verify.length){for(var r=e[t],o=!0,i=0;i<n.verify.length;i++){if(!(0,n.verify[i])(r)){o=!1;break}}o?_[t]=r:m({key:t,code:60002,value:r})}}));n(_)}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function S(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var E,R,P=function(t,n){void 0===t&&(t="FZ_STROAGE"),void 0===n&&(n=R),e.setStorageSync(t,n)};function T(e,t){function n(e,t){return e<<t|e>>>32-t}function r(e,t){var n,r,o,i,a;return o=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^a^o^i:n|r?1073741824&a?3221225472^a^o^i:1073741824^a^o^i:a^o^i}function o(e,t,o,i,a,u,c){return e=r(e,r(r(function(e,t,n){return e&t|~e&n}(t,o,i),a),c)),r(n(e,u),t)}function i(e,t,o,i,a,u,c){return e=r(e,r(r(function(e,t,n){return e&n|t&~n}(t,o,i),a),c)),r(n(e,u),t)}function a(e,t,o,i,a,u,c){return e=r(e,r(r(function(e,t,n){return e^t^n}(t,o,i),a),c)),r(n(e,u),t)}function u(e,t,o,i,a,u,c){return e=r(e,r(r(function(e,t,n){return t^(e|~n)}(t,o,i),a),c)),r(n(e,u),t)}function c(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var s,f,l,p,d,g,h,y,m,v;for(s=function(e){for(var t,n=e.length,r=n+8,o=16*((r-r%64)/64+1),i=Array(o-1),a=0,u=0;u<n;)a=u%4*8,i[t=(u-u%4)/4]=i[t]|e.charCodeAt(u)<<a,u++;return a=u%4*8,i[t=(u-u%4)/4]=i[t]|128<<a,i[o-2]=n<<3,i[o-1]=n>>>29,i}(e),h=1732584193,y=4023233417,m=2562383102,v=271733878,f=0;f<s.length;f+=16)l=h,p=y,d=m,g=v,h=o(h,y,m,v,s[f+0],7,3614090360),v=o(v,h,y,m,s[f+1],12,3905402710),m=o(m,v,h,y,s[f+2],17,606105819),y=o(y,m,v,h,s[f+3],22,3250441966),h=o(h,y,m,v,s[f+4],7,4118548399),v=o(v,h,y,m,s[f+5],12,1200080426),m=o(m,v,h,y,s[f+6],17,2821735955),y=o(y,m,v,h,s[f+7],22,4249261313),h=o(h,y,m,v,s[f+8],7,1770035416),v=o(v,h,y,m,s[f+9],12,2336552879),m=o(m,v,h,y,s[f+10],17,4294925233),y=o(y,m,v,h,s[f+11],22,2304563134),h=o(h,y,m,v,s[f+12],7,1804603682),v=o(v,h,y,m,s[f+13],12,4254626195),m=o(m,v,h,y,s[f+14],17,2792965006),h=i(h,y=o(y,m,v,h,s[f+15],22,1236535329),m,v,s[f+1],5,4129170786),v=i(v,h,y,m,s[f+6],9,3225465664),m=i(m,v,h,y,s[f+11],14,643717713),y=i(y,m,v,h,s[f+0],20,3921069994),h=i(h,y,m,v,s[f+5],5,3593408605),v=i(v,h,y,m,s[f+10],9,38016083),m=i(m,v,h,y,s[f+15],14,3634488961),y=i(y,m,v,h,s[f+4],20,3889429448),h=i(h,y,m,v,s[f+9],5,568446438),v=i(v,h,y,m,s[f+14],9,3275163606),m=i(m,v,h,y,s[f+3],14,4107603335),y=i(y,m,v,h,s[f+8],20,1163531501),h=i(h,y,m,v,s[f+13],5,2850285829),v=i(v,h,y,m,s[f+2],9,4243563512),m=i(m,v,h,y,s[f+7],14,1735328473),h=a(h,y=i(y,m,v,h,s[f+12],20,2368359562),m,v,s[f+5],4,4294588738),v=a(v,h,y,m,s[f+8],11,2272392833),m=a(m,v,h,y,s[f+11],16,1839030562),y=a(y,m,v,h,s[f+14],23,4259657740),h=a(h,y,m,v,s[f+1],4,2763975236),v=a(v,h,y,m,s[f+4],11,1272893353),m=a(m,v,h,y,s[f+7],16,4139469664),y=a(y,m,v,h,s[f+10],23,3200236656),h=a(h,y,m,v,s[f+13],4,681279174),v=a(v,h,y,m,s[f+0],11,3936430074),m=a(m,v,h,y,s[f+3],16,3572445317),y=a(y,m,v,h,s[f+6],23,76029189),h=a(h,y,m,v,s[f+9],4,3654602809),v=a(v,h,y,m,s[f+12],11,3873151461),m=a(m,v,h,y,s[f+15],16,530742520),h=u(h,y=a(y,m,v,h,s[f+2],23,3299628645),m,v,s[f+0],6,4096336452),v=u(v,h,y,m,s[f+7],10,1126891415),m=u(m,v,h,y,s[f+14],15,2878612391),y=u(y,m,v,h,s[f+5],21,4237533241),h=u(h,y,m,v,s[f+12],6,1700485571),v=u(v,h,y,m,s[f+3],10,2399980690),m=u(m,v,h,y,s[f+10],15,4293915773),y=u(y,m,v,h,s[f+1],21,2240044497),h=u(h,y,m,v,s[f+8],6,1873313359),v=u(v,h,y,m,s[f+15],10,4264355552),m=u(m,v,h,y,s[f+6],15,2734768916),y=u(y,m,v,h,s[f+13],21,1309151649),h=u(h,y,m,v,s[f+4],6,4149444226),v=u(v,h,y,m,s[f+11],10,3174756917),m=u(m,v,h,y,s[f+2],15,718787259),y=u(y,m,v,h,s[f+9],21,3951481745),h=r(h,l),y=r(y,p),m=r(m,d),v=r(v,g);return 32===t?c(h)+c(y)+c(m)+c(v):c(y)+c(m)}function b(){var t,n=(void 0===t&&(t="FZ_STROAGE"),e.getStorageSync(t));n?R=n:(n={ARKAPPID:"",ARKDEBUG:0,ARKUPLOADURL:"",ARKFRISTPROFILE:"",ARKFRISTPROFILESEND:!1,ARKSUPER:{},ARK_ID:I(),FRISTDAY:0,POSTDATA:[],SEESIONDATE:0,SEESIONID:""},R=n,P()),new Promise((function(t,n){e.getSystemInfo({success:function(e){E=e,t(e)}})}))}function x(){R.ARK_ID=I(),R.ARK_TRACKID="",R.ARK_LOGINID="",R.ARKSUPER={},R.ARKFRISTPROFILE="",R.ARKFRISTPROFILESEND=!1,K()}function D(e,t){R[e]=t,P()}function w(e){Object.keys(e).forEach((function(t){void 0!==R[t]&&(R[t]=e[t])})),P()}function O(){return R.ARK_LOGINID||R.ARK_TRACKID||R.ARK_ID}function I(){var e=(new Date).getTime()+""+1e4*Math.random();return"FS"+T(e,32)+T(e,32).slice(0,4)}function K(){var e=+new Date;R.SEESIONDATE=e,R.SEESIONID=T("FS"+e+Math.random(),16),P()}function U(e){return e?R.ARKSUPER[e]:R.ARKSUPER}function L(e){R.ARKSUPER=Object.assign({},R.ARKSUPER,e),P()}function k(e){e&&R.ARKSUPER[e]&&delete R.ARKSUPER[e],void 0===e&&(R.ARKSUPER={}),P()}function F(e){R.POSTDATA||(R.POSTDATA=[]),R.POSTDATA.length<500&&(R.POSTDATA.push(e),P())}function N(e){var t={};e.forEach((function(e){t[e.xwhen]=1}));for(var n=R.POSTDATA.length-1;n>=0;n--){var r=R.POSTDATA[n];t[r.xwhen]&&R.POSTDATA.splice(n,1)}P()}var M={networkType:""},Y=!1;function V(){return new Promise((function(t,n){e.getNetworkType({success:function(e){M=e,Y=!0,t(e)},fail:function(){Y=!0,t(M)}})}))}var j=function(t,n){return new Promise((function(r,o){e.request(A(A({},t),{success:function(e){var t=e.data;n&&n(e),!t||200!==t.code&&"Status: OK"!==t?o(t):r(t)},fail:function(e){n&&n(e),o(e)}}))}))};function C(e,t){var n=e.getTimezoneOffset(),r={"M+":(e=new Date(e.getTime()+60*n*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,3==RegExp.$1.length?(""+r[o]).length<3?("00"+r[o]).substr(("00"+r[o]).length-3,("00"+r[o]).length):r[o]:("00"+r[o]).substr((""+r[o]).length)));return t}var z=0,B=!1,G=0;function H(){return+new Date+G}function q(){return new Promise((function(e){if(!_.allowTimeCheck||z)return B=!0,e(z);j({url:_.uploadURL,timeout:500},(function(t){if(t&&t.header&&t.header.Date){var n=+new Date;z=+new Date(t.header.Date);var r=Math.abs((z-n)/1e3);r>_.maxDiffTimeInterval&&(G=z-n,y({code:20013,value:C(new Date(z),"yyyy-MM-dd hh:mm:ss +SSS"),key:C(new Date(n),"yyyy-MM-dd hh:mm:ss +SSS"),fn:r+"s"}))}B=!0,e(z)}))}))}var Z={isBeforeStartUp:!1,isAfterStartUp:!1,isBeforePageView:!1,isAfterPageView:!1};function J(t,n,r){if(!Z[t]&&e.AnalysysAgent){var o=e.AnalysysAgent[n];s(o)&&o(r),Z[t]=!0}}var W=function(t){if(e.AnalysysAgent){var n=e.AnalysysAgent.onReady;s(n)&&n(t)}},Q=function(e){J("isBeforeStartUp","onBeforeStartUp",e)},X=function(e){J("isAfterStartUp","onAfterStartUp",e)},ee=[],te=!1;function ne(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Y&&B?e.apply(e,t):(ee.push({fn:e,arg:t}),te||(Promise.all([V(),q()]).then((function(){var e=R.ARKDEBUG;(_.appkey!==R.ARKAPPID||1===e&&e!==_.debugMode||R.ARKUPLOADURL!==_.uploadURL)&&(x(),w({ARKAPPID:_.appkey,ARKDEBUG:_.debugMode,ARKUPLOADURL:_.uploadURL})),W(_),ee.forEach((function(e){e.fn.apply(e.fn,e.arg)}))})),te=!0))}}function re(e,t){var n,r=((n={})[e]=t,n);if(!d(r))return!1;L(r),y({fn:"$registerSuperProperty",code:20002,value:r})}function oe(e){if(!d(e))return!1;L(e),y({fn:"$registerSuperProperties",code:20002,value:e})}function ie(e){return U(e)}function ae(){return U()}function ue(e){k(e),y({fn:"$unRegisterSuperProperty",code:20003,value:e})}function ce(){k(),y({fn:"$clearSuperProperties",code:20004})}var se=[];function fe(t){var n=S(R.POSTDATA);if(!se.length&&n.length){se=n.splice(0,20);var r={url:_.uploadURL+"/up?appid="+_.appkey,data:se,encryptType:_.encryptType};if(y({key:r.url,value:se,code:20012}),1===_.debugMode)return N(se),void(se=[]);e.AnalysysAgent.encrypt&&s(e.AnalysysAgent.encrypt.uploadData)&&(r=e.AnalysysAgent.encrypt.uploadData(r)),e.AnalysysModal&&e.AnalysysModal(se),j({url:r.url,method:"POST",data:r.data,timeout:2e3}).then((function(e){N(se),se=[],fe(),t&&t(),y({code:20001})})).catch((function(e){m({code:60008})}))}}function le(e,t){F(e),fe(t)}var pe={scene:null,utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:"",share_id:"",share_level:"",share_path:""};function de(e){var t=getCurrentPages();if(t&&t.length){var n=t[t.length-1],r=n.route,o=n.options,i=Object.keys(o);if(i.length&&e){var a="";return i.forEach((function(e,t){t&&(a+="&"),a+=e+"="+o[e]})),r+"?"+a}return r}return""}var ge={};function he(e){ge.element_function=e.function||"",ge.element_id=e.id||"",ge.element_content=e.content||"",ge.element_type=e.type||"",ge.element_name=e.name||""}var ye={xwho:function(){return O()},xwhen:function(){return H()},xwhat:function(e){return e},$lib:function(){return"FeiShu"},$lib_version:function(){return"5.0.0"},$platform:function(){return"FeiShu"},$debug:function(){return _.debugMode},$is_login:function(){return!!R.ARK_LOGINID},$session_id:function(){return e=new Date,t=e.getTime(),n=e.getTimezoneOffset(),r=new Date(t+60*n*1e3+288e5).getDate(),o=R.SEESIONDATE?new Date(R.SEESIONDATE+60*n*1e3+288e5).getDate():0,(!R.SEESIONID||!R.SEESIONDATE||t-R.SEESIONDATE>18e5||o!==r)&&K(),R.SEESIONID;var e,t,n,r,o},$screen_width:function(){return E.screenWidth},$screen_height:function(){return E.screenHeight},$os:function(){var e=E.system;return e?e.split(" ")[0]:""},$browser:function(){return""},$brand:function(){return E.brand},$browser_version:function(){return E.version},$os_version:function(){return E.system?E.system.split(" ")[1]:""},$model:function(){return E.model},$language:function(){return E.language},$network:function(){return M.networkType},$time_zone:function(){return"GMT"+(e=(new Date).getTimezoneOffset(),n=e%60,r="-",((t=e/60)<=0||n<0)&&(r="+",t=-t,n<0&&(n=-n)),1==(t+="").length&&(t="0"+t),1==(n+="").length&&(n="0"+n),r+t+":"+n);var e,t,n,r},$startup_time:function(){return""},$is_first_time:function(){return!R.FRISTDAY},$is_first_day:function(){return!R.FRISTDAY||(i(R.FRISTDAY)?C(new Date(H()),"yyyyMMdd")===R.FRISTDAY:!!o(R.FRISTDAY)&&C(new Date(H()),"yyyyMMdd")===C(new Date(R.FRISTDAY),"yyyyMMdd"))},$first_visit_time:function(){return R.ARKFRISTPROFILE},$first_visit_language:function(){return E.language},$original_id:function(){return R.ARK_TRACKID||R.ARK_ID},$is_time_calibrated:function(){return!(!_.allowTimeCheck||!G)},$scene:function(){return pe.scene.toString()},$referrer:function(){return function(){var e=getCurrentPages();if(e&&e.length){var t=e[e.length-2];if(t)return t.route}return pe.scene+""}()},$url:function(){return de(_.autoCompleteURL)},$url_path:function(){return de()},$url_domain:function(){return de()},$utm_campaign_id:function(){return pe.utm_campaign_id},$utm_source:function(){return pe.utm_source},$utm_medium:function(){return pe.utm_medium},$utm_term:function(){return pe.utm_term},$utm_content:function(){return pe.utm_content},$utm_campaign:function(){return pe.utm_campaign},$share_id:function(){return pe.share_id},$share_level:function(){return pe.share_level},$share_path:function(){return pe.share_path},$element_content:function(){return ge.element_content},$element_id:function(){return ge.element_id},$element_type:function(){return ge.element_type},$element_function:function(){return ge.element_function},$element_name:function(){return ge.element_name},$appid:function(){return _.$appid},$appname:function(){return _.$appname}},me=["$appid","$appname","$lib","$lib_version","$platform","$debug","$is_login","$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height"],ve=["$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term"],_e={$startup:{attrs:S(ve,["$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$is_first_time","$scene"])},$end:{attrs:["$duration"]},$pageview:{attrs:S(ve,["$network","$screen_width","$screen_height","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$referrer","$scene","$startup_time","$url","$url_domain","$share_id","$share_path","$share_level"])},page_close:{attrs:["$url","$referrer","$url_domain","pagestaytime"]},$alias:{attrs:["$original_id"]},$share:{attrs:[]},$getPresetProperties:{attrs:["$time_zone","$language","$screen_width","$screen_height","$network","$first_visit_time","$os","$session_id"]},$user_click:{attrs:["$element_content","$element_id","$element_type","$element_name","$element_function","$url","$url_path","$is_first_day","$session_id","$is_time_calibrated"]},$profile_set_once:{attrs:["$first_visit_time","$first_visit_language"]}};function $e(e){var t={appid:_.appkey,xwho:ye.xwho(),xwhat:ye.xwhat(e),xwhen:ye.xwhen(),xcontext:{}},n=_e[e];return me.forEach((function(e){t.xcontext[e]=ye[e]()})),n&&n.attrs.forEach((function(e){t.xcontext[e]=ye[e]?ye[e]():""})),t}var Ae={};function Se(){return Ae}var Ee={startup:{xwhen:0},pageview:{xwhen:0}};function Re(e,t){var n={},r=arguments.length;r&&(f(e)&&(n.$title=e),d(t)&&(n=Object.assign({},t,n)));var o=$e("$pageview");Ee.pageview.xwhen=o.xwhen,o.xcontext=Object.assign({},o.xcontext,U(),Se(),n),le(o)}function Pe(){var e=$e("page_close");if(!e.xcontext||e.xcontext.$url){var t={pagestaytime:e.xwhen-Ee.pageview.xwhen};e.xcontext=Object.assign({},e.xcontext,U(),Se(),t),Ae={},le(e)}}function Te(e,t,n){var r=$e(e),o={};c(t)&&(o=t),f(t)&&p(n)&&(o[t]=n),d(o)&&(r.xcontext=Object.assign({},r.xcontext,o)),le(r)}function be(e,t){Te("$profile_set_once",e,t)}function xe(e,t){Te("$profile_set",e,t)}function De(e,t){Te("$profile_increment",e,t)}function we(e,t){Te("$profile_append",e,t)}function Oe(e){var t,n=$e("$profile_unset");l(e)?n.xcontext=Object.assign({},n.xcontext,((t={})[e]="",t)):m({code:600010,fn:"profileUnset",key:e}),le(n)}function Ie(){le($e("$profile_delete"))}function Ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$e("$startup");Ee.startup.xwhen=n.xwhen,R.ARKFRISTPROFILE||D("ARKFRISTPROFILE",C(new Date(n.xwhen),"yyyy-MM-dd hh:mm:ss.SSS")),n.xcontext=Object.assign({},n.xcontext,U()),2===e.length&&"onShow"===e[1]&&Q(n),le(n,(function(){X(n)})),_.autoProfile&&!R.ARKFRISTPROFILESEND&&(be(),D("ARKFRISTPROFILESEND",!0))}function Ue(){var e=$e("$end"),t={$duration:e.xwhen-Ee.startup.xwhen};e.xcontext=Object.assign({},e.xcontext,U(),t),le(e)}function Le(e){if(!f(e))return m({code:60005,value:e,fn:"alias"}),!1;D("ARK_LOGINID",e),y({code:20014});var t=$e("$alias");!0===_.autoProfile?(F(t),be()):le(t)}function ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>0&&e[0]&&c(e[0])&&("tap"==e[0].type||"longtap"==e[0].type||"longpress"==e[0].type)){var n=e[1];try{var r=e[0].target.dataset.eventOpts;r&&(n=r[0][1][0][0])}catch(e){console.log(e)}var o=e[0]&&e[0].currentTarget&&e[0].currentTarget.dataset?e[0].currentTarget.dataset:{};he(Object.assign(o,{function:n}));var i=$e("$user_click");i.xcontext=Object.assign({},i.xcontext,U()),le(i)}}function Fe(e){he({function:"onTabItemTap",name:e.text});var t=$e("$user_click");t.xcontext=Object.assign({},t.xcontext,U()),le(t)}function Ne(){x(),!0===_.autoProfile&&be({$reset_time:C(new Date,"yyyy-MM-dd hh:mm:ss.SSS")}),y({fn:"$reset",code:20005})}function Me(){var e=$e("$getPresetProperties");return delete e.xcontext.$is_login,y({code:20010,fn:"getPresetProperties",value:e.xcontext}),e.xcontext}function Ye(e,t){var n={};c(t)&&(n=t),d(t);var r=$e(e);r.xcontext=Object.assign({},r.xcontext,U(),n),le(r)}function Ve(t){var n;f(t)?(n=t,R.ARK_TRACKID=n,P(),y({code:20002,value:t,fn:"identify"}),e.AnalysysModal&&e.AnalysysModal([{xwhat:"$identify",xwho:t}])):m({code:60009,fn:"identify",value:t})}function je(){return R.ARK_TRACKID||R.ARK_ID}function Ce(e){d(e)?(!function(e){Ae=Object.assign({},Ae,e)}(e),y({fn:"$pageProperty",code:20002,value:e})):m({fn:"$pageProperty",code:600016,value:e})}function ze(e,t){var n=O(),r=de(),o=Number(pe.share_level)+1;c(e)||(e={path:r});ne((function(){var e=$e("$share"),t={$share_id:n,$share_level:o,$share_path:r};e.xcontext=Object.assign({},e.xcontext,t),le(e)}))();var i="share_id="+n+"&share_level="+o+"&share_path="+encodeURIComponent(r);e.path=e.path||r;var a=e.path.indexOf("?")>-1?"&":"?";return e.path=e.path+a+i,e}var Be=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onShareTimeline","onAddToFavorites","onPageScroll","onResize","onTabItemTap","onSaveExitState"];function Ge(e,t,n){var r=e[t];r?e[t]="onShareAppMessage"===t?function(e){return n(r.call(this,e))}:function(e){var o=r.apply(this,arguments);return n(e,t),o}:"onShareAppMessage"!==t&&(e[t]=function(e){n(e)})}function He(e){if(!0===_.auto&&Ge(e,"onShow",ne(Re)),_.autoPageViewDuration&&(Ge(e,"onHide",Pe),Ge(e,"onUnload",Pe)),1==_.autoShare&&Ge(e,"onShareAppMessage",ze),1==_.autoTrack)for(var t in e){var n=e[t];s(n)&&Be.indexOf(t)<0?Ge(e,t,ke):s(n)&&"onTabItemTap"==t&&Ge(e,t,Fe)}}var qe=App,Ze=Page,Je=Component;function We(e){Ge(e,"onLaunch",(function(e){!function(e){var t=e.query;t&&(pe.utm_campaign_id=e.query.campaign_id,pe.utm_campaign=t.utm_campaign,pe.utm_content=t.utm_content,pe.utm_medium=t.utm_medium,pe.utm_source=t.utm_source,pe.utm_term=t.utm_term),t.share_id&&t.share_level&&t.share_path&&(pe.share_id=t.share_id,pe.share_level=t.share_level,pe.share_path=decodeURIComponent(t.share_path)),e.scene&&(pe.scene=e.scene)}(e)})),Ge(e,"onShow",ne(Ke)),Ge(e,"onHide",Ue),qe(e)}function Qe(e){He(e),Ze(e)}function Xe(e){e.methods&&He(e.methods),Je(e)}var et=function(){function e(){this.config={appkey:"",uploadURL:"",debugMode:0,auto:!0,autoProfile:!0,encryptType:0,autoShare:!1,allowTimeCheck:!1,maxDiffTimeInterval:30,autoTrack:!1,autoCompleteURL:!0,autoPageViewDuration:!1,$appid:"",$appname:""},this.pageView=ne(Re),this.share=ze,this.registerSuperProperty=re,this.registerSuperProperties=oe,this.getSuperProperty=ie,this.getSuperProperties=ae,this.unRegisterSuperProperty=ue,this.clearSuperProperties=ce,this.profileSetOnce=be,this.profileSet=xe,this.profileAppend=we,this.profileIncrement=De,this.profileDelete=Ie,this.profileUnset=Oe,this.reset=Ne,this.track=Ye,this.alias=Le,this.getPresetProperties=Me,this.identify=Ve,this.getDistinctId=je,this.pageProperty=Ce,b()}return e.prototype.init=function(e){var t=this;$(e).then((function(e){t.config=e}))},e}();Object.keys({appkey:"",uploadURL:"",debugMode:0,auto:!0,autoProfile:!0,encryptType:0,autoShare:!1,allowTimeCheck:!1,maxDiffTimeInterval:30,autoTrack:!1,autoCompleteURL:!0,autoPageViewDuration:!1,$appid:"",$appname:""}).forEach((function(e){Object.defineProperty(et.prototype,e,{get:function(){return this.config[e]},set:function(t){var n,r=this;$((n={},n[e]=t,n)).then((function(e){r.config=e}))},enumerable:!1,configurable:!0})}));var nt=new et;e.AnalysysAgent=nt,App=We,Page=Qe,Component=Xe,module.exports=nt;
